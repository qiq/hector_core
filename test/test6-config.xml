<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Config SYSTEM "config.dtd">

<!--
test6: sort according to status: two readers(1), connected to two intermediates(1), another simple intermediate, two writers(1)
-->

<Config baseDir="../src">

	<Server id="test">
		<threads>1</threads>
		<serverHost>*</serverHost>
		<serverPort>1100</serverPort>
		<processingEngine ref="robot_processing_engine"/>
		<logConfig>../test/test.log.props</logConfig>
		<lib name="servers/robot/Robot.la"/>
	</Server>

	<ProcessingEngine id="robot_processing_engine">
		<processor ref="P_load_resource1"/>
		<processor ref="P_load_resource2"/>
		<processor ref="P_simple"/>
		<processor ref="P_save_resource1"/>
		<processor ref="P_save_resource2"/>
	</ProcessingEngine>

	<Processor id="P_load_resource1">
		<threads>1</threads>
		<modules>
			<module ref="M_load_resource1"/>
			<module ref="M_simple1"/>
		</modules>
		<output>
			<nextProcessor ref="P_simple"/>
		</output>
	</Processor>
	<Module id="M_load_resource1">
		<lib name="TestInput.la"/>
		<param name="maxItems" value="1000"/>
		<param name="idPrefix" value="i1-"/>
	</Module>
	<Module id="M_simple1">
		<lib name="TestSimple.la"/>
		<param name="setStatus" value="1"/>
	</Module>

	<Processor id="P_load_resource2">
		<threads>1</threads>
		<modules>
			<module ref="M_load_resource2"/>
			<module ref="M_simple2"/>
		</modules>
		<output>
			<nextProcessor ref="P_simple"/>
		</output>
	</Processor>
	<Module id="M_load_resource2">
		<lib name="TestInput.la"/>
		<param name="maxItems" value="2000"/>
		<param name="idPrefix" value="i2-"/>
	</Module>
	<Module id="M_simple2">
		<lib name="TestSimple.la"/>
		<param name="setStatus" value="0"/>
	</Module>

	<Processor id="P_simple">
		<threads>1</threads>
		<modules>
			<module ref="M_simple"/>
		</modules>
		<input>
			<queue/>
		</input>
		<output>
			<nextProcessor ref="P_save_resource1" filter="1"/>
			<nextProcessor ref="P_save_resource2"/>
		</output>
	</Processor>
	<Module id="M_simple">
		<lib name="TestSimple.la"/>
	</Module>

	<Processor id="P_save_resource1">
		<threads>1</threads>
		<modules>
			<module ref="M_save_resource1"/>
		</modules>
		<input>
			<queue/>
		</input>
	</Processor>
	<Module id="M_save_resource1">
		<lib name="TestOutput.la"/>
	</Module>

	<Processor id="P_save_resource2">
		<threads>1</threads>
		<modules>
			<module ref="M_save_resource2"/>
		</modules>
		<input>
			<queue/>
		</input>
	</Processor>
	<Module id="M_save_resource2">
		<lib name="TestOutput.la"/>
	</Module>

</Config>
